{% extends 'base.html' %}
{% load i18n %}

{% block title %}
    {% trans 'Mahjong soul accounts' %}
{% endblock %}

{% block content %}
    <div>
        <h2>{% trans 'Mahjong soul accounts' %}</h2>

        <p>{% trans 'Statistics is updating once a hour.'|urlize %}</p>
        <div class="filters">
            <a href="{% url 'ms_accounts' 'four' %}">
                <span class="badge badge-{% if four_players %}success{% else %}primary{% endif %}">{% trans 'four players' %}</span>
            </a>
            <a href="{% url 'ms_accounts' 'three' %}">
                <span class="badge badge-{% if not four_players %}success{% else %}primary{% endif %}">{% trans 'sanma' %}</span>
            </a>
        </div>
        <div class="table-responsive">
            <table class="table table-hover mt-4">
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">{% trans 'Player' %}</th>
                    <th scope="col">{% trans 'Rank' %}</th>
                    <th scope="col">{% trans 'Points' %}</th>
                    <th scope="col">{% trans 'Account' %}</th>
                    <th scope="col">{% trans 'City' %}</th>
                </tr>
                </thead>
                <tbody>
                {% for stat in statistics %}
                    <tr>
                        <th scope="row">{{ forloop.counter }}</th>
                        <td>
                            {% with stat.account.player as player %}
                                {% include 'common/_player_name.html' %}
                            {% endwith %}
                        </td>
                        <td>
                            <nobr>{{ stat.get_rank_display }}</nobr>
                        </td>
                        <td>
                            <nobr>{{ stat.points }} / {{ stat.max_pt }} </nobr>
                        </td>
                        <td>
                            {{ stat.account.account_name }}
                        </td>
                        <td>
                            {% if stat.account.player.city %}
                                <a href="{% url 'city_page' stat.account.player.city.slug %}">{{ stat.account.player.city.name }}</a>
                            {% else %}
                                {% if stat.account.player.is_replacement or stat.account.player.is_hide %}
                                    -
                                {% else %}
                                    {{ stat.account.player.country }}
                                {% endif %}
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}

{% block meta_tags %}
    <meta name="description" content="{% trans 'Mahjong soul accounts' %}. {% if four_players %}{% trans 'four players'|title %}{% else %}{% trans 'sanma'|title %}{% endif %}">
    <meta property="og:description" content="{% trans 'Mahjong soul accounts' %}. {% if four_players %}{% trans 'four players'|title %}{% else %}{% trans 'sanma'|title %}{% endif %}">
{% endblock %}