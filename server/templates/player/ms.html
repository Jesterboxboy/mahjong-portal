{% extends 'base.html' %}
{% load i18n russian_words_morph meta_tags_helper tz staticfiles %}

{% block title %}
    {{ player.full_name }}. {% trans 'Mahjong Soul profile' %}
{% endblock %}

{% block content %}
    <div>
        <h1>{{ player.full_name }}</h1>
        <p>
            {% trans 'From' %}
            {% if player.city %}
                <a href="{% url 'city_page' player.city.slug %}">{{ player.city.name|genitive|title }}</a>,
                {{ player.country.name }}
            {% else %}
                {{ player.country.name|genitive|title }}
            {% endif %}
        </p>

        <p><a href="{% url 'player_details' player.slug %}">{% trans 'Player page' %}</a></p>

        {% if ms_data %}
            <h4>{% trans 'Statistics for' %} {{ ms_data.account_name }}</h4>

            {% with ms_data.four_players_statistics as stat %}
                {% if stat %}
                    <p class="mt-3">
                        {% trans 'Four players' %}: {{ stat.get_rank_display }}, {{ stat.points }} / {{ stat.max_pt }}pt
                    </p>

                    <div class="table-responsive-sm">
                        <table class="table table-hover mt-4">
                            <thead>
                            <tr>
                                <th scope="col">
                                    {% trans 'Games' %}
                                </th>
                                <th scope="col">
                                    <nobr>{% trans 'Avg. place' %}</nobr>
                                </th>
                                <th scope="col">
                                    {% trans '1st' %}
                                </th>
                                <th scope="col">
                                    {% trans '2nd' %}
                                </th>
                                <th scope="col">
                                    {% trans '3rd' %}
                                </th>
                                <th scope="col">
                                    {% trans '4th' %}
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <td>
                                    {{ stat_item.played_games }}
                                </td>
                                <td>
                                    {{ stat_item.average_place|floatformat:2 }}
                                </td>
                                <td>
                                    {{ stat_item.first_place|floatformat:2 }}
                                </td>
                                <td>
                                    {{ stat_item.second_place|floatformat:2 }}
                                </td>
                                <td>
                                    {{ stat_item.third_place|floatformat:2 }}
                                </td>
                                <td>
                                    {{ stat_item.fourth_place|floatformat:2 }}
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                {% endif %}
            {% endwith %}
        {% endif %}
    </div>
{% endblock %}

{% block meta_tags %}
    <meta name="description" content="{{ player.full_name }}. {% trans 'Mahjong Soul profile' %}">
    <meta property="og:description" content="{{ player.full_name }}. {% trans 'Mahjong Soul profile' %}">
{% endblock %}